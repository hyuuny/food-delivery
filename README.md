# 🛵 food-delivery

---

> 이 프로젝트는 스프링 웹플럭스(Spring WebFlux)와 코루틴(Coroutines)을 학습하면서, 도메인 주도 설계(DDD, Domain-Driven Design) 원칙을 적용하여 개발되었습니다. 각
> 레이어는 명확한 책임을 가지도록 설계되어 있으며, 애플리케이션의 비즈니스 로직을 이해하고 유지보수하는 데 중점을 두었습니다.

<br>

## 사용 기술

---

언어

- `Kotlin`

프레임워크

- `Spring Webflux`

데이터베이스

- `PostgreSQL`, `H2`

라이브러리

- `Coroutines`, `Spring Data R2DBC`

도구 및 서비스

- `Docker`, `GitHub Actions`

<br>

## 기술 사용 목적

---

### `Kotlin`

코틀린은 자바보다 안전성과 간결함을 제공하는 언어입니다.

API 개발 시 자바의 롬복과 비교하여 @Getter, @Setter 등을 선언하지 않고 간결하게 객체를 정의할 수 있으며, null 안정성을 강화하여 NPE를 방지할 수 있었습니다.

<br>

### `Spring WebFlux & Spring Data R2DBC`

Spring WebFlux와 Spring Data R2DBC를 사용하여 비동기 서비스를 구축하였습니다.

이로 인해 높은 성능과 확장성을 제공하며, Spring Data R2DBC를 통해 리액티브 스타일의 데이터 접근을 가능하게 합니다.

<br>

### `Coroutines`

코틀린을 사용하여 논블로킹 작업을 위한 비동기 프로그래밍을 작성했습니다.

이는 높은 성능과 병렬 처리를 가능하게 하여, 스레드 관리와 관련된 복잡성을 줄이고 코드도 보다 간결하고 가독성이 좋아졌습니다.

<br>

### `Docker`

도커를 사용하여 애플리케이션을 컨테이너화하여 개발 환경과 운영 환경 간의 일관성을 유지했습니다.

이를 통해 개발, 배포, 관리 과정에서 환경의 일관성과 효율성을 확보했습니다.

<br>

### `GitHub Actions`

GitHub Actions를 사용하여 CI/CD 파이프라인을 자동화하고, 빌드, 테스트, 배포 작업을 신속하게 처리했습니다.

이를 통해 변경 사항을 빠르게 반영하고, 품질 높은 소프트웨어를 신속하게 배포할 수 있었습니다.

<br>

## 퀵 스타트

---

- docker image url: https://hub.docker.com/repository/docker/hyuuny/food-delivery

```shell
# 이미지 다운로드
$ docker pull hyuuny/food-delivery

# 도커 컨테이너 실행
$ docker run -d -p 8080:80 hyuuny/food-delivery
```

<br>

- docker-compose 컨테이너 생성

```shell
$ docker compose up -d
```

<br>

## 요구사항

---

### 매장

- 매장 목록 조회
    - [x] 매장 목록을 조회할 수 있다.
    - [x] 배달 방식별로 조회 (자체 배달, 배달 업체, 포장)
    - [x] 음식 카테고리별로 조회
    - [x] 매장명으로 조회
    - [x] 목록에 평균 점수 포함

- 매장 등록
    - [x] 매장을 등록할 수 있다.

- 매장 조회
    - [x] 매장을 조회할 수 있다.
    - [x] 존재하지 않는 매장을 조회할 수 없다.

- 매장 수정
    - [x] 매장을 수정할 수 있다.
    - [x] 존재하지 않는 매장을 수정할 수 없다.

- 매장 삭제
    - [x] 매장을 삭제할 수 있다.
    - [x] 존재하지 않는 매장을 삭제할 수 없다.
    - [x] 매장 상세 정보와 이미지도 함께 삭제된다.

<br>

### 메뉴 그룹

- 메뉴 그룹 목록 조회
    - [x] 메뉴 그룹 목록을 조회할 수 있다.
    - [x] 매장별로 조회
    - [x] 메뉴 그룹명으로 조회

- 메뉴 그룹 등록
    - [x] 메뉴 그룹을 등록할 수 있다.
    - [x] 존재하지 않는 매장에 등록할 수 없다.
    - [x] 메뉴 그룹명은 두 글자 이상이어야 한다.
    - [x] 메뉴 그룹은 매장에 속해야 한다.

- 메뉴 그룹 조회
    - [x] 메뉴 그룹을 조회할 수 있다.
    - [x] 존재하지 않는 메뉴 그룹을 조회할 수 없다.

- 메뉴 그룹 수정
    - [x] 메뉴 그룹을 수정할 수 있다.
    - [x] 존재하지 않는 메뉴 그룹을 수정할 수 없다.
    - [x] 메뉴 그룹명은 두 글자 이상이어야 한다.

- 메뉴 그룹 순서 변경
    - [x] 메뉴 그룹의 순서를 변경할 수 있다.
    - [x] 등록된 메뉴 그룹의 개수와 변경하는 메뉴 그룹의 개수가 일치해야 한다.
    - [x] 메뉴 그룹은 오름차순으로 사용자에 보여진다.

- 메뉴 그룹 삭제
    - [x] 메뉴 그룹을 삭제할 수 있다.
    - [x] 존재하지 않는 메뉴 그룹을 삭제할 수 없다.

<br>

### 메뉴

- 메뉴 목록 조회
    - [x] 메뉴 목록을 조회할 수 있다.
    - [x] 매장별로 조회
    - [x] 메뉴 상태별로 조회 (판매중, 품절, 판매중지)
    - [x] 인기 상품 여부로 조회

- 메뉴 등록
    - [x] 메뉴를 등록할 수 있다.
    - [x] 존재하지 않는 메뉴 그룹에 등록할 수 없다.
    - [x] 메뉴의 가격은 0보다 커야 한다.
    - [x] 메뉴는 메뉴 그룹에 속해야 한다.

- 메뉴 조회
    - [x] 메뉴를 조회할 수 있다.
    - [x] 존재하지 않는 메뉴를 조회할 수 없다.

- 메뉴 수정
    - [x] 메뉴를 수정할 수 있다.
    - [x] 존재하지 않는 메뉴를 수정할 수 없다.
    - [x] 메뉴의 가격은 0보다 커야 한다.

- 메뉴 상태 변경
    - [x] 메뉴의 상태를 변경할 수 있다.
    - [x] 존재하지 않는 메뉴의 상태를 변경할 수 없다.

- 메뉴 그룹 변경
    - [x] 메뉴가 속한 메뉴 그룹을 변경할 수 있다.
    - [x] 존재하지 않는 메뉴 그룹으로 변경할 수 없다.

- 메뉴 삭제
    - [x] 메뉴를 삭제할 수 있다.
    - [x] 존재하지 않는 메뉴를 삭제할 수 없다.

<br>

### 옵션 그룹

- 옵션 그룹 목록 조회
    - [x] 옵션 그룹 목록을 조회할 수 있다.
    - [x] 메뉴별로 조회
    - [x] 옵션 그룹명으로 조회

- 옵션 그룹 등록
    - [x] 옵션 그룹을 등록할 수 있다.
    - [x] 존재하지 않는 메뉴에 등록할 수 없다.
    - [x] 옵션 그룹명은 두 글자 이상이어야 한다.
    - [x] 옵션 그룹은 메뉴에 속해야 한다.

- 옵션 그룹 조회
    - [x] 옵션 그룹을 조회할 수 있다.
    - [x] 존재하지 않는 옵션 그룹을 조회할 수 없다.

- 옵션 그룹 수정
    - [x] 옵션 그룹을 수정할 수 있다.
    - [x] 존재하지 않는 옵션 그룹을 수정할 수 없다.
    - [x] 옵션 그룹명은 두 글자 이상이어야 한다.

- 옵션 그룹 순서 변경
    - [x] 옵션 그룹의 순서를 변경할 수 있다.
    - [x] 등록된 옵션 그룹의 개수와 변경하는 옵션 그룹의 개수가 일치해야 한다.
    - [x] 옵션 그룹은 오름차순으로 사용자에 보여진다.

- 옵션 그룹 삭제
    - [x] 옵션 그룹을 삭제할 수 있어야 한다.
    - [x] 존재하지 않는 옵션 그룹을 삭제할 수 없다.

<br>

### 옵션

- 옵션 목록 조회
    - [x] 옵션을 조회할 수 있다.
    - [x] 옵션 그룹에 속한 옵션 조회
    - [x] 옵션명으로 조회

- 옵션 등록
    - [x] 옵션을 등록할 수 있다.
    - [x] 존재하지 않는 옵션 그룹에 등록할 수 없다.
    - [x] 옵션명은 공백일 수 없다.

- 옵션 조회
    - [x] 옵션을 조회할 수 있다.
    - [x] 존재하지 않는 옵션을 조회할 수 없다.

- 옵션 수정
    - [x] 옵션을 수정할 수 있다.
    - [x] 존재하지 않는 옵션을 수정할 수 없다.
    - [x] 옵션명은 공백일 수 없다.

- 옵션 그룹 변경
    - [x] 옵션이 속한 옵션 그룹을 변경할 수 있다.
    - [x] 존재하지 않는 옵션 그룹으로 변경 요청 했을 때, 예외 메세지를 반환해야 한다.

- 옵션 삭제
    - [x] 옵션을 삭제할 수 있다.
    - [x] 존재하지 않는 옵션을 삭제할 수 없다.

<br>

### 카테고리

- 카테고리 목록 조회
    - [x] 카테고리 목록을 조회할 수 있다.
    - [x] 카테고리 아이디로 조회
    - [x] 배달 방식별로 조회 (자체 배달, 배달 업체, 포장)
    - [x] 카테고리명으로 조회
    - [x] 노출 여부로 조회

- 카테고리 등록
    - [x] 카테고리를 등록할 수 있어야 한다.

- 카테고리 조회
    - [x] 카테고리를 조회할 수 있다.
    - [x] 존재하지 않는 카테고리를 조회할 수 없다.

- 카테고리 수정
    - [x] 카테고리를 수정할 수 있다.
    - [x] 존재하지 않는 카테고리를 수정할 수 없다.

- 카테고리 순서 변경
    - [x] 카테고리의 순서를 변경할 수 있다.
    - [x] 등록된 카테고리의 개수와 변경하는 카테고리의 개수가 일치해야 한다.
    - [x] 카테고리는 오름차순으로 사용자에 보여진다.

- 배달 방식별 카테고리 목록 조회
    - [x] 배달 방식별로 우선 순위에 의해 정렬된 카테고리 목록을 조회할 수 있다.

- 카테고리 삭제
    - [x] 카테고리를 삭제할 수 있다.
    - [x] 존재하지 않는 카테고리를 삭제할 수 없다.

<br>

### 장바구니

- 장바구니 추가
    - [x] 장바구니에 메뉴를 추가할 수 있다.
    - [x] 존재하지 않는 매장의 메뉴를 추가할 수 없다.
    - [x] 메뉴의 옵션이 비어 있으면 추가할 수 없다.
    - [x] 동일한 매장의 메뉴만 담을 수 있다.
    - [x] 장바구니가 없는 회원은 장바구니 생성 후 메뉴를 추가해야 한다.

- 장바구니 조회
    - [x] 장바구니를 조회할 수 있다.

- 장바구니 메뉴 수량 변경
    - [x] 장바구니에 담긴 메뉴 수량을 변경할 수 있다.
    - [x] 수량은 1개 이상이여야 한다.
    - [x] 장바구니에 담겨있지 않은 메뉴의 수량을 변경할 수 없다.

- 장바구니 메뉴 옵션 변경
    - [x] 장바구니에 담긴 메뉴의 옵션을 변경할 수 있다.
    - [x] 옵션은 비어 있을 수 없다.
    - [x] 존재하지 않는 장바구니 메뉴의 옵션을 변경할 수 없다.

- 장바구니 메뉴 삭제
    - [x] 장바구니에 담긴 메뉴를 삭제할 수 있다.
    - [x] 존재하지 않는 장바구니 메뉴를 삭제할 수 없다.

<br>

### 주문

- 주문 목록 조회
    - [x] 주문 목록을 조회할 수 있다.
    - [x] 주문 아이디로 조회
    - [x] 주문번호로 조회
    - [x] 회원 아이디로 조회
    - [x] 회원명으로 조회
    - [x] 매장 아이디로 조회
    - [x] 매장명으로 조회
    - [x] 음식 카테고리로 조회
    - [x] 주문 번호로 조회
    - [x] 주문 방식으로 조회
    - [x] 주문 상태로 조회
    - [x] 배달 방식으로 조회
    - [x] 회원의 전화번호로 조회
    - [x] 주문 기간으로 조회

- 주문 등록
    - [x] 주문을 등록할 수 있다.
    - [x] 장바구니의 메뉴, 옵션, 가격이 다르면 주문을 등록할 수 없다.
    - [x] 쿠폰 사용 시 이미 사용했거나, 할인 금액, 유효 기간이 맞지 않으면 주문을 등록할 수 없다.
    - [x] 회원이 사용한 쿠폰은 사용 처리해야 한다.
    - [x] 쿠폰 사용 시, 쿠폰을 적용한 총 금액이 0보다 작으면 주문을 등록할 수 없다.
    - [x] 존재하지 않는 회원이 주문을 등록할 수 없다.
    - [x] 존재하지 않는 메뉴를 주문을 등록할 수 없다.
    - [x] 존재하지 않는 옵션을 주문을 등록할 수 없다.
    - [x] 주문이 완료되면, 장바구니를 비워야 한다.

- 주문 조회
    - [x] 주문을 조회할 수 있다.
    - [x] 존재하지 않는 회원의 주문을 조회할 수 없다.

- 주문 취소
    - [x] 주문을 취소할 수 있다.
    - [x] 존재하지 않는 주문을 취소할 수 없다.
    - [x] 취소할 수 없는 상태라면 취소할 수 없다.
    - [x] 쿠폰이 사용된 주문이면, 쿠폰을 다시 사용할 수 있어야 한다.

- 주문 환불
    - [x] 주문을 환불할 수 있다.
    - [x] 존재하지 않는 주문을 환불할 수 없다.
    - [x] 환불할 수 없는 상태라면 환불할 수 없다.
    - [x] 쿠폰이 사용된 주문이면, 쿠폰을 다시 사용할 수 있어야 한다.

- 주문 상태 변경
    - [x] 주문의 상태를 변경할 수 있다.
    - [x] 존재하지 않는 주문의 상태를 변경할 수 없다.

<br>

### 배달

- 배달 목록 조회
    - [x] 배달 목록을 조회할 수 있다.
    - [x] 아이디로 조회
    - [x] 라이더 아이디로 조회
    - [x] 라이더명으로 조회
    - [x] 주문 아이디로 조회
    - [x] 주문 번호로 조회
    - [x] 회원명으로 조회
    - [x] 매장명으로 조회
    - [x] 배달 상태로 조회
    - [x] 배달 기간으로 조회

- 배달 수락
    - [x] 배달을 수락할 수 있다.
    - [x] 존재하지 않는 주문의 배달을 수락할 수 없다.
    - [x] 존재하지 않는 라이더는 배달을 수락할 수 없다.
    - [x] 주문 상태가 CONFIRMED("주문확인"), PROCESSING("처리중")이 아니면 배달을 수락할 수 없다.
    - [x] 라이더가 아니면 배달을 수락할 수 없다.

- 배달 취소
    - [x] 배달을 취소할 수 있다.
    - [x] 존재하지 않는 주문의 배달을 취소할 수 없다.
    - [x] 존재하지 않는 라이더는 배달을 취소할 수 없다.
    - [x] 존재하지 않는 배달 내역을 취소할 수 없다.
    - [x] 배달 내역의 주문 정보와 요청한 주문이 다르면 배달을 취소할 수 없다.
    - [x] 배달 내역의 라이더와 요청한 라이더가 다르면 배달을 취소할 수 없다.
    - [x] ACCEPTED("수락") 상태가 아니면 배달을 취소할 수 없다.
    - [x] 이미 취소된 배달을 취소할 수 없다.

- 배달 픽업
    - [x] 존재하지 않는 주문의 배달을 픽업할 수 없다.
    - [x] 존재하지 않는 라이더는 배달을 픽업할 수 없다.
    - [x] 존재하지 않는 배달 내역을 픽업할 수 없다.
    - [x] 배달 내역의 주문 정보와 요청한 주문이 다르면 배달을 픽업할 수 없다.
    - [x] 배달 내역의 라이더와 요청한 라이더가 다르면 배달을 픽업할 수 없다.
    - [x] 이미 취소된 배달을 픽업할 수 없다.

- 배달 완료
    - [x] 존재하지 않는 주문의 배달을 완료할 수 없다.
    - [x] 존재하지 않는 라이더는 배달을 완료할 수 없다.
    - [x] 존재하지 않는 배달 내역을 완료할 수 없다.
    - [x] 배달 내역의 주문 정보와 요청한 주문이 다르면 배달을 완료할 수 없다.
    - [x] 배달 내역의 라이더와 요청한 라이더가 다르면 배달을 완료할 수 없다.
    - [x] 이미 취소된 배달을 완료할 수 없다.
    - [x] 이미 완료된 배달을 완료할 수 없다.

- 배달 조회
    - [x] 배달 내역을 조회할 수 있다.
    - [x] 존재하지 않는 배달 내역을 조회할 수 없다.

- 배달 상태 변경
    - [x] 배달의 상태를 변경할 수 있다.
    - [x] 존재하지 않는 배달 내역을 변경할 수 없다.

<br>

### 회원

- 회원 목록 조회
    - [x] 회원 목록을 조회할 수 있다.
    - [x] 회원 아이디로 조회
    - [x] 회원명으로 조회
    - [x] 회원 닉네임으로 조회
    - [x] 회원 이메일로 조회
    - [x] 회원 전화번호로 조회
    - [x] 회원 가입 기간으로 조회

- 회원 가입
    - [x] 회원가입 할 수 있다. (고객, 라이더, 사장님)
    - [x] 중복된 이메일로 회원가입할 수 없다.
    - [x] 회원명은 두 글자 이상이어야 한다.
    - [x] 닉네임은 두 글자에서 열 글자 사이여야 한다.
    - [x] 올바른 이메일 형식이어야 한다.
    - [x] 올바른 휴대폰 번호 형식이어야 한다.

- 회원 조회
    - [x] 회원의 정보를 조회할 수 있다.
    - [x] 존재하지 않는 회원의 정보를 조회할 수 없다.

- 회원명 변경
    - [x] 회원명을 변경할 수 있다.
    - [x] 회원명은 두 글자 이상이어야 한다.

- 닉네임 변경
    - [x] 닉네임을 변경할 수 있다.
    - [x] 닉네임은 두 글자 ~ 열 글자 사이여야 한다.

- 이메일 변경
    - [x] 이메일을 변경할 수 있다.
    - [x] 올바른 이메일 형식이어야 한다.

- 휴대폰 번호 변경
    - [x] 휴대폰 번호를 변경할 수 있다.
    - [x] 올바른 휴대폰 번호 형식이어야 한다.

- 회원 이미지 변경
    - [x] 회원 이미지를 변경할 수 있다.

- 회원 탈퇴
    - [x] 회원 탈퇴를 할 수 있다.
    - [x] 존재하지 않는 회원의 탈퇴를 할 수 없다.

<br>

### 회원 주소

- 주소 목록 조회
    - [x] 주소 목록을 조회할 수 있다.
    - [x] 배달지로 선택된 주소가 가장 상단에 위치해야 한다.

- 주소 등록
    - [x] 주소를 등록할 수 있다.
    - [x] 등록하는 주소는 자동으로 배달지로 선택되어야 한다.
    - [x] 주소는 최대 10개까지 등록할 수 있다.

- 주소 조회
    - [x] 주소를 조회할 수 있다.
    - [x] 존재하지 않는 주소를 조회할 수 없다.

- 주소 수정
    - [x] 주소를 수정할 수 있다.
    - [x] 존재하지 않는 주소를 수정할 수 없다.

- 배달지 주소 변경
    - [x] 배달지 주소를 변경할 수 있다.
    - [x] 존재하지 않는 주소를 배달지로 변경할 수 없다.
    - [x] 기존 배달지는 자동으로 해제되어야 한다.

- 주소 삭제
    - [x] 주소를 삭제할 수 있다.
    - [x] 존재하지 않는 주소를 삭제할 수 없다.

<br>

### 찜

- 찜 목록 조회
    - [x] 찜한 매장 내역을 조회할 수 있다.

- 찜 등록 및 해제
    - [x] 찜하지 않은 매장이면 찜을 등록할 수 있다.
    - [x] 이미 찜한 매장이면 찜을 해제할 수 있다.
    - [x] 존재하지 않는 매장에 찜 등록을 할 수 없다.
    - [x] 존재하지 않는 회원이 찜 등록을 할 수 없다.

### 리뷰

- 리뷰 목록 조회
    - [x] 리뷰 목록을 조회할 수 있다.
    - [x] 리뷰 아이디로 조회
    - [x] 회원 아이디로 조회
    - [x] 회원명으로 조회
    - [x] 회원 닉네임으로 조회
    - [x] 매장 아이디로 조회
    - [x] 매장명으로 조회
    - [x] 주문 아이디로 조회
    - [x] 주문 기간으로 조회

- 리뷰 등록
    - [x] 리뷰를 등록할 수 있다.
    - [x] 존재하지 않는 회원이 리뷰 등록을 할 수 없다.
    - [x] 존재하지 않는 매장에 리뷰 등록을 할 수 없다.
    - [x] 존재하지 않는 주문으로 리뷰 등록을 할 수 없다.
    - [x] 리뷰 평점은 1 ~ 5 사이여야 한다.
    - [x] 리뷰에 이미지를 추가할 수 있어야 한다.

- 리뷰 조회
    - [x] 리뷰를 조회할 수 있다.
    - [x] 존재하지 않는 리뷰를 조회할 수 없다.

- 리뷰 삭제
    - [x] 리뷰를 삭제할 수 있다.
    - [x] 존재하지 않는 리뷰를 삭제할 수 없다.

<br>

### 리뷰 댓글

- 리뷰 댓글 목록 조회
    - [x] 리뷰 댓글 목록을 조회할 수 있다.
    - [x] 리뷰 댓글 아이디로 조회
    - [x] 사장님 아이디로 조회
    - [x] 리뷰 아이디로 조회
    - [x] 리뷰 댓글 등록 기간으로 조회

- 리뷰 댓글 등록
    - [x] 리뷰 댓글을 등록할 수 있다.
    - [x] 존재하지 않는 사장님이 리뷰 댓글을 등록을 할 수 없다.
    - [x] 존재하지 않는 리뷰에 댓글 등록을 할 수 없다.

- 리뷰 댓글 조회
    - [x] 리뷰 댓글을 조회할 수 있다.
    - [x] 존재하지 않는 리뷰 댓글을 조회할 수 없다.

- 리뷰 댓글 수정
    - [x] 리뷰 댓글을 수정할 수 있다.
    - [x] 존재하지 않는 리뷰 댓글을 수정할 수 없다.

- 리뷰 댓글 삭제
    - [x] 리뷰를 삭제할 수 있다.
    - [x] 존재하지 않는 리뷰 댓글을 삭제할 수 없다.

### 쿠폰

- 쿠폰 목록 조회
    - [x] 쿠폰 목록을 조회할 수 있다.
    - [x] 쿠폰 아이디로 조회
    - [x] 쿠폰 코드로 조회
    - [x] 타입으로 조회
    - [x] 쿠폰명으로 조회

- 쿠폰 등록
    - [x] 쿠폰을 등록할 수 있다.
    - [x] 이미 사용중인 코드로 새로운 쿠폰을 등록할 수 없다.
    - [x] 코드 길이는 네 글자 이상이어야 한다.
    - [x] 카테고리 할인 타입이면, 카테고리 아이디는 필수 값이다.
    - [x] 매장 할인 타입이면, 매장 아이디는 필수 값이다.
    - [x] 할인 금액은 1,000원 이상이어야 한다.
    - [x] 쿠폰 발급일은 다음 날부터 가능하다.
    - [x] 쿠폰 발급 시작일은 발급 종료일 이전이어야 한다.
    - [x] 쿠폰 사용 시작일은 다음 날부터 가능하다.
    - [x] 쿠폰 사용 시작일은 사용 종료일 이전이어야 한다.

- 쿠폰 조회
    - [x] 쿠폰을 조회할 수 있다.
    - [x] 존재하지 않는 쿠폰을 조회할 수 없다.

<br>

### 회원 쿠폰

- 회원 쿠폰 목록 조회
    - [x] 회원의 쿠폰 목록을 조회할 수 있다.
    - [x] 사용 가능한 쿠폰의 내역만 조회할 수 있다.

- 회원 쿠폰 발급
    - [x] 회원은 쿠폰을 발급 받을 수 있다.
    - [x] 존재하지 않는 회원이 쿠폰을 발급받을 수 없다.
    - [x] 존재하지 않는 쿠폰을 발급받을 수 없다.
    - [x] 이미 발급 받은 쿠폰을 다시 발급 받을 수 없다.
    - [x] 쿠폰이 발급 가능한 시점이 아니면, 회원은 발급 받을 수 없다.

- 발급 가능한 쿠폰 목록 조회
    - [x] 발급 가능한 쿠폰 목록을 조회할 수 있다.
    - [x] 현 시점에 발급 가능한 쿠폰 목록이 없으면 빈 목록이 조회된다.

- 사용 가능한 쿠폰 목록 조회
    - [x] 사용 가능한 쿠폰 목록을 조회할 수 있다.
    - [x] 해당 주문에 사용 불가능한 쿠폰은 아래에 배치된다.

- 쿠폰 조회
    - [x] 쿠폰을 조회할 수 있다.
    - [x] 존재하지 않는 회원이 쿠폰을 조회할 수 없다.
    - [x] 존재하지 않는 쿠폰을 조회할 수 없다.

<br>

## 도메인 명세

---

### 매장 (Store)

| 필드                 | 설명                        |
|--------------------|---------------------------|
| id                 | 고유 식별자                    |
| categoryId         | 카테고리 아이디                  |
| deliveryType       | 배달 타입 (자체배달, 배달업체 이용, 포장) |
| name               | 매장명                       |
| ownerName          | 사업자명                      |
| taxId              | 사업자등록번호                   |
| deliveryFee        | 배달비                       |
| minimumOrderAmount | 최소주문금액                    |
| iconImageUrl       | 매장 아이콘 이미지 URL            |
| description        | 매장 성명                     |
| foodOrigin         | 원산지                       |
| phoneNumber        | 매장 연락처                    |

<br>

### 매장 상세 (StoreDetail)

| 필드            | 설명     |
|---------------|--------|
| id            | 고유 식별자 |
| storeId       | 매장 아이디 |
| zipCode       | 우편 번호  |
| address       | 주소     |
| detailAddress | 상세 주소  |
| openHours     | 오픈 시간  |
| closedDay     | 휴일     |

<br>

### 매장 이미지 (StoreImage)

| 필드       | 설명         |
|----------|------------|
| id       | 고유 식별자     |
| storeId  | 매장 아이디     |
| imageUrl | 매장 이미지 URL |

<br>

### 메뉴 그룹 (MenuGroup)

| 필드          | 설명        |
|-------------|-----------|
| id          | 고유 식별자    |
| storeId     | 매장 아이디    |
| name        | 메뉴 그룹명    |
| priority    | 우선순위 (정렬) |
| description | 메뉴 그룹 설명  |

<br>

### 메뉴 (Menu)

| 필드          | 설명                     |
|-------------|------------------------|
| id          | 고유 식별자                 |
| menuGroupId | 메뉴 그룹 아이디              |
| name        | 메뉴명                    |
| price       | 가격                     |
| status      | 메뉴 상태 (판매중, 품절, 판매 중지) |
| popularity  | 인기 여부                  |
| imageUrl    | 메뉴 이미지 URL             |
| description | 메뉴 설명                  |

<br>

### 옵션 그룹 (OptionGroup)

| 필드       | 설명        |
|----------|-----------|
| id       | 고유 식별자    |
| menuId   | 메뉴 아이디    |
| name     | 옵션 그룹명    |
| required | 선택 필수 여부  |
| priority | 우선순위 (정렬) |

<br>

### 옵션 (Option)

| 필드            | 설명        |
|---------------|-----------|
| id            | 고유 식별자    |
| optionGroupId | 옵션 그룹 아이디 |
| name          | 옵션명       |
| price         | 가격        |

<br>

### 카테고리 (Category)

| 필드           | 설명                        |
|--------------|---------------------------|
| id           | 고유 식별자                    |
| deliveryType | 배달 타입 (자체배달, 배달업체 이용, 포장) |
| name         | 카테고리명                     |
| priority     | 우선순위 (정렬)                 |
| iconImageUrl | 카테고리 아이콘 이미지 URL          |
| visible      | 숨김 여부                     |

<br>

### 장바구니 (Cart)

| 필드          | 설명     |
|-------------|--------|
| id          | 고유 식별자 |
| userId      | 회원 아이디 |
| storeId     | 매장 아이디 |
| deliveryFee | 배달비    |

<br>

### 장바구니 아이템 (CartItem)

| 필드       | 설명       |
|----------|----------|
| id       | 고유 식별자   |
| cartId   | 장바구니 아이디 |
| menuId   | 메뉴 아이디   |
| quantity | 수량       |

<br>

### 장바구니 아이템 옵션 (CartItemOption)

| 필드         | 설명           |
|------------|--------------|
| id         | 고유 식별자       |
| cartItemId | 장바구니 아이템 아이디 |
| optionId   | 옵션 아이디       |

<br>

### 주문 (Order)

| 필드                   | 설명                        |
|----------------------|---------------------------|
| id                   | 고유 식별자                    |
| orderNumber          | 주문번호                      |
| userId               | 회원 아이디                    |
| storeId              | 매장 아이디                    |
| categoryId           | 카테고리 아이디                  |
| couponId             | 쿠폰 아이디                    |
| paymentId            | 결제 아이디                    |
| paymentMethod        | 결제 방법 (신용카드, 계좌이체 등)      |
| status               | 주문 상태 (주문 생성, 결제 대기 중 등)  |
| deliveryType         | 배달 타입 (자체배달, 배달업체 이용, 포장) |
| zipCode              | 우편 번호                     |
| address              | 주소                        |
| detailAddress        | 상세 주소                     |
| phoneNumber          | 고객 연락처                    |
| messageToRider       | 배달 기사에게 전할 말              |
| messageToStore       | 매장에 전할 말                  |
| orderPrice           | 주문 금액                     |
| couponDiscountAmount | 쿠폰 할인 금액                  |
| totalPrice           | 주문 총 금액                   |
| deliveryFee          | 배달비                       |

<br>

### 주문 아이템 (OrderItem)

| 필드        | 설명     |
|-----------|--------|
| id        | 고유 식별자 |
| orderId   | 주문 아이디 |
| menuId    | 메뉴 아이디 |
| menuName  | 메뉴명    |
| menuPrice | 메뉴 가격  |
| quantity  | 수량     |

<br>

### 주문 아이템 옵션 (OrderItemOption)

| 필드          | 설명         |
|-------------|------------|
| id          | 고유 식별자     |
| orderItemId | 주문 아이템 아이디 |
| optionId    | 옵션 아이디     |
| optionName  | 옵션명        |
| optionPrice | 옵션 가격      |
| quantity    | 수량         |

<br>

### 배달 (Delivery)

| 필드            | 설명                 |
|---------------|--------------------|
| id            | 고유 식별자             |
| riderId       | 라이더 아이디            |
| orderId       | 주문 아이디             |
| status        | 배달 상태 (수락, 배달 중 등) |
| pickupTime    | 픽업 시간              |
| deliveredTime | 배달 완료 시간           |
| cancelTime    | 취소 시간              |

<br>

### 회원 (User)

| 필드          | 설명                        |
|-------------|---------------------------|
| id          | 고유 식별자                    |
| userType    | 회원 타입 (관리자, 고객, 사장님, 라이더) |
| name        | 회원명                       |
| nickname    | 닉네임                       |
| email       | 이메일                       |
| phoneNumber | 연락처                       |
| imageUrl    | 이미지 URL                   |

<br>

### 회원 주소 (UserAddress)

| 필드               | 설명           |
|------------------|--------------|
| id               | 고유 식별자       |
| userId           | 회원 아이디       |
| name             | 주소명          |
| zipCode          | 우편 번호        |
| address          | 주소           |
| detailAddress    | 상세 주소        |
| messageToRider   | 라이더에게 전할 말   |
| entrancePassword | 현관 비밀번호      |
| routeGuidance    | 찾아오시는 길 안내   |
| selected         | 현재 선택된 주소 여부 |

<br>

### 찜 (LikedStore)

| 필드      | 설명     |
|---------|--------|
| id      | 고유 식별자 |
| userId  | 회원 아이디 |
| storeId | 매장 아이디 |

<br>

### 리뷰 (Review)

| 필드      | 설명     |
|---------|--------|
| id      | 고유 식별자 |
| userId  | 회원 아이디 |
| storeId | 매장 아이디 |
| orderId | 주문 아이디 |
| score   | 평점     |
| content | 내용     |

<br>

### 리뷰 포토 (ReviewPhoto)

| 필드       | 설명     |
|----------|--------|
| id       | 고유 식별자 |
| reviewId | 리뷰 아이디 |
| photoUrl | 포토 URL |

<br>

### 리뷰 댓글 (ReviewComment)

| 필드       | 설명      |
|----------|---------|
| id       | 고유 식별자  |
| userId   | 사장님 아이디 |
| reviewId | 리뷰 아이디  |
| content  | 내용      |

<br>

### 쿠폰 (Coupon)

| 필드                 | 설명       |
|--------------------|----------|
| id                 | 고유 식별자   |
| code               | 코드       |
| type               | 할인 타입    |
| categoryId         | 카테고리 아이디 |
| storeId            | 매장 아이디   |
| name               | 쿠폰명      |
| discountAmount     | 할인 금액    |
| minimumOrderAmount | 최소주문금액   |
| description        | 설명       |
| issueStartDate     | 발급 시작일   |
| issueEndDate       | 발급 종료일   |
| validFrom          | 사용 시작일   |
| validTo            | 사용 종료일   |

<br>

### 회원 쿠폰 (UserCoupon)

| 필드         | 설명     |
|------------|--------|
| id         | 고유 식별자 |
| userId     | 회원 아이디 |
| couponId   | 쿠폰 아이디 |
| used       | 사용여부   |
| usedDate   | 사용일    |
| validFrom  | 사용 시작일 |
| validTo    | 사용 종료일 |
| issuedDate | 발급일    |
